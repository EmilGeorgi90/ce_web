<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css?family=Lato:400,700"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <div id="form-page" style="display: flex; justify-content: space-around">
      <div style="display: flex">
        <div class="container" style="width: 500px; height: 567px">
          <div class="row d-flex justify-content-center" style="height: 100%">
            <div>
              <form
                class="needs-validation"
                id="regForm"
                style="display: flex; flex-direction: column; height: 100%"
                novalidate
              >
                <div class="form-header mb-3">
                  <a
                    id="prevBtn"
                    class="text-decoration-none"
                    style="color: #266ed3"
                    href="#"
                  >
                    <i
                      class="bi bi-arrow-left"
                      style="color: #0d6efd; vertical-align: middle"
                    ></i>
                    <span
                      id="prevBtnText"
                      style="color: #0d6efd; vertical-align: middle"
                    ></span>
                  </a>
                  <div class="all-steps" id="all-steps">
                    <span class="index">1</span>
                    <span class="index">2</span>
                    <span class="index">3</span>
                  </div>
                </div>
                <div class="form-tab">
                  <p class="form-title">Tell us about the intervention</p>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="ProjectName">Project name</label>
                      <button
                        onclick="openKnowledgeBase('https://ensomhedital.webflow.io/knowledge')"
                        tabindex="-1"
                        class="btn"
                        type="button"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="Please specify the name of your project or intervention."
                        data-bs-custom-class="custom-tooltip"
                      >
                        <i class="bi bi-info-circle"></i>
                      </button>
                    </div>
                    <input
                      type="text"
                      class="form-control field"
                      id="ProjectName"
                      placeholder="Project name"
                    />
                  </div>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="InterventionType">Intervention Type</label>
                      <button
                        tabindex="-1"
                        class="btn"
                        type="button"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="Please choose one of the provided intervention types that best reflects your intervention. If none of these intervention types reflects your intervention or if your intervention is a mix of various intervention types, please choose “Other intervention type”."
                        data-bs-custom-class="custom-tooltip"
                      >
                        <i class="bi bi-info-circle"></i>
                      </button>
                    </div>
                    <select
                      class="form-select field"
                      id="InterventionType"
                      aria-label="Intervention Type"
                    >
                      <option selected></option>
                      <option value="1">Social network</option>
                      <option value="2">Social support</option>
                      <option value="3">
                        Social and emotional skills training
                      </option>
                      <option value="4">Psychological treatment</option>
                      <option value="5">Other intervention type</option>
                      <option value="6">Own specification</option>
                    </select>
                  </div>
                  <div class="">
                    <div class="form-label">
                      <label for="TargetAudience">Target audience</label>
                      <button
                        tabindex="-1"
                        class="btn"
                        type="button"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="Please choose the age group that best reflects the demographics of the participants."
                        data-bs-custom-class="custom-tooltip"
                      >
                        <i class="bi bi-info-circle"></i>
                      </button>
                    </div>
                    <select
                      class="form-select field"
                      id="TargetAudience"
                      aria-label="Target audience"
                    >
                      <option selected></option>
                      <option value="1">General Population</option>
                      <option value="2">Youth, 0-15</option>
                      <option value="3">Working age, 16-64</option>
                      <option value="4">Elderly, 65+</option>
                    </select>
                  </div>
                </div>
                <div class="form-tab">
                  <p class="form-title">Tell us about participants and costs</p>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="NumberOfParticipants"
                        >Number of participants</label
                      >
                      <button
                        tabindex="-1"
                        class="btn"
                        type="button"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="Number of participants expected to complete the intervention/that have completed the intervention."
                        data-bs-custom-class="custom-tooltip"
                      >
                        <i class="bi bi-info-circle"></i>
                      </button>
                    </div>

                    <input
                      type="number"
                      value="0"
                      min="1"
                      class="form-control field"
                      id="NumberOfParticipants"
                      placeholder="Number of participants"
                    />
                  </div>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="Total-cost-of-intervention"
                        >Total cost of intervention (DKK)</label
                      >
                      <button
                        tabindex="-1"
                        class="btn"
                        type="button"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="In DKK, in total across all participants."
                        data-bs-custom-class="custom-tooltip"
                      >
                        <i class="bi bi-info-circle"></i>
                      </button>
                    </div>
                    <input
                      type="number"
                      value="0"
                      min="1"
                      class="form-control field"
                      id="Total-cost-of-intervention"
                      placeholder="Total cost of intervention (DKK)"
                    />
                  </div>
                </div>
                <div class="form-tab">
                  <p class="form-title">
                    (Optional) Do you know the expected or actual impact of your
                    loneliness intervention?
                  </p>
                  <p class="form-text-custom">
                    Please specify input only if you have reliable data, e.g.
                    based on before-after survey evidence and/or comparisons
                    with a control group. You can specify the impact of your
                    intervention in terms of average reduction on the 3-item
                    UCLA scale, which ranges from 3 to 9 (where 9 is most
                    lonely).  It is not required to have this information to
                    proceed with the tool. You may proceed without it and we
                    therefore encourage you to stick to the intervention types
                    listed before if applicable and read the precautions in the
                    information icon.
                  </p>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="EffectSize">Effect size (UCLA-3 scale)</label>
                      <button
                        onclick="openKnowledgeBase('https://ensomhedital.webflow.io/knowledge')"
                        tabindex="-1"
                        class="btn"
                        type="button"
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        data-bs-title="Be cautious if your effect exceeds 1 point on the 3-item UCLA scale. Evidence suggests that effect sizes of more than 1 are unlikely. The effect size must not exceed 3 points on the 3-item UCLA scale as this corresponds to lifting all participants out of loneliness.

                        For guidance on best practices for measuring an intervention’s effectiveness, please refer to the pdf guide.
                        
                        If you do not know how to specify the expected or actual impact of the intervention on the 3-item UCLA scale, but on some other scale (e.g., on the 20-item UCLA scale, or in terms of proportion of participants who experience a material reduction in loneliness), please reach out to us via the contact page and we would be happy to help converting your input data.
                        
                        Click the icon to read more"
                        data-bs-custom-class="custom-tooltip"
                      >
                        <i class="bi bi-info-circle"></i>
                      </button>
                    </div>
                    <input
                      type="number"
                      min="0.01"
                      step="0.01"
                      class="form-control field"
                      id="EffectSize"
                      placeholder="Effect size (UCLA-3 scale)"
                      value="0"
                      onchange="validate()"
                    />
                    <div class="invalid-feedback" id="EffectSize-invalid">
                      Værdien skal være mellem 0.01 og 3
                    </div>
                  </div>
                </div>
                <div class="form-tab">
                  <p class="form-title">
                    Where do you want us to send the report?
                  </p>
                  <p class="form-text-custom">
                    Please fill out the information below to receive the full
                    report.
                  </p>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="OrganisationName">Organisation name</label>
                    </div>
                    <input
                      type="text"
                      class="form-control field"
                      id="OrganisationName"
                      placeholder="Organisation name"
                    />
                  </div>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="OrganisationType">Organisation type</label>
                    </div>
                    <select
                      class="form-select mb-3 field"
                      id="OrganisationType"
                      aria-label="Organisation type"
                    >
                      <option selected></option>
                      <option value="1">Non-profit organisation</option>
                      <option value="2">For-profit organisation</option>
                      <option value="3">Social enterprise</option>
                      <option value="4">Municipality</option>
                      <option value="5">Fond</option>
                      <option value="9">Other</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="Email">Your name</label>
                    </div>
                    <input
                      type="text"
                      class="form-control field"
                      id="Name"
                      placeholder="Your name"
                    />
                  </div>
                  <div class="mb-3">
                    <div class="form-label">
                      <label for="Email">Email addresse</label>
                    </div>
                    <input
                      type="email"
                      class="form-control field"
                      id="Email"
                      placeholder="name@example.com"
                    />
                  </div>
                  <div>
                    <input type="checkbox" name="Concent" id="Concent" />
                    <label for="Concent"
                      >I give permission to be updated with newsletters.</label
                    >
                  </div>
                </div>
                <div style="display: flex; margin-top: auto" id="buttons">
                  <button
                    type="button"
                    style="
                      border: 1px solid #528de0;
                      color: #528de0;
                      margin-right: 16px;
                    "
                    class="button hidden btn nextBtn"
                    id="idkBtn"
                  >
                    I don't know it
                  </button>
                  <button
                    type="button"
                    id="nextBtn"
                    class="button btn nextBtn"
                    style="background: #266ed3; color: #ffffff"
                  >
                    Next
                  </button>
                </div>
                <div id="message" class="hidden">
                  <p class="form-title">Check your inbox!</p>
                  <p class="form-text">
                    Thanks for using the Loneliness Impact Calculator. Your
                    results will be shared with you via email within a few
                    minutes.  If you haven’t received an email from us within a
                    few moments, please check your spam folder or reach out to
                    us via the contact form.
                  </p>
                  <button
                    id="goback"
                    class="btn btn-primary button"
                    style="
                      padding: 12px 32px;
                      width: 460px;
                      height: 43px;
                      background: #266ed3;
                      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.25);
                      border-radius: 100px;
                      line-height: 19px;
                    "
                  >
                    Back to the website
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <!-- <img
        src="./Group 257.png"
        id="template"
        class="hidden"
        style="max-height: 700px"
      /> -->
    </div>
    <script>
      function validate() {
        const value = document.getElementById("EffectSize").value;
        if (value > 3 || value == 0) {
          document.getElementById("nextBtn").style.display = "none";
          document.getElementById("EffectSize-invalid").style.display = "block";
        } else {
          document.getElementById("nextBtn").style.display = "block";
          document.getElementById("EffectSize-invalid").style.display = "none";
        }
      }
    </script>
    <script>
      const tooltipTriggerList = document.querySelectorAll(
        '[data-bs-toggle="tooltip"]'
      );
      const tooltipList = [...tooltipTriggerList].map(
        (tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl)
      );
      function openKnowledgeBase(url) {
        window.open(url, "_blank");
      }
    </script>
    <script>
      $(document).ready(() => {
        const url = "https://api.ensomhedital.dk/api/report?";
        let tabindex = 0;
        const steps = $(".all-steps");
        const faneElements = $(".form-tab");
        faneElements[0].style.display = "block";
        steps.children()[tabindex].classList.add("active");
        $("#regForm").submit(function (evt) {
          evt.preventDefault();
        });
        $(".nextBtn").click(() => {
          if (tabindex == 2) {
            $("#nextBtn").text("Submit");
          }
          if (validate(faneElements[tabindex])) {
            faneElements[tabindex].style.display = "none";
            if (faneElements.length <= tabindex + 1) {
              tabindex++;
              $(steps).hide();
              $("#prevBtn").hide();
              $("#buttons").hide();
              $("#message").show();
              submit();
            } else {
              steps.children()[tabindex].classList.remove("active");
              tabindex += 1;
              if (tabindex == 2) {
                $("#idkBtn").show();
              } else {
                $("#idkBtn").hide();
              }
              if (tabindex >= steps.children().length) {
                steps.children().addClass("active");
              } else {
                steps.children()[tabindex].classList.add("active");
              }
              faneElements[tabindex].style.display = "block";
            }
          } else {
            alert("you need to put in all infomations");
          }
        });
        $("#prevBtn").click(() => {
          if (tabindex == 0) {
            window.parent.location = "https://ensomhedital.webflow.io/";
          }
          if (tabindex < faneElements.length)
            faneElements[tabindex].style.display = "none";
          steps.children().removeClass("active");
          $("#buttons").show();
          $("#message").hide();
          tabindex -= 1;
          if (tabindex == 2) {
            $("#idkBtn").show();
          } else {
            $("#idkBtn").hide();
          }
          steps.show();
          if (tabindex >= steps.children().length) {
            steps.children().addClass("active");
          } else {
            steps.children()[tabindex].classList.add("active");
          }
          $("#nextBtn").text("Next");
          faneElements[tabindex].style.display = "block";
        });
        const validate = (currentTab) => {
          const inputFields = $(currentTab).find(".field");
          for (let i = 0; i < inputFields.length; i++) {
            if (inputFields[i].value == "") {
              return false;
            }
            if (inputFields[i].type == "number" && inputFields[i].value == 0) {
              return false;
            }
          }
          return true;
        };
        function submit(form) {
          const projectName = document.getElementById("ProjectName").value;
          const interventionType =
            document.getElementById("InterventionType").value;
          const numberOfParticipants = document.getElementById(
            "NumberOfParticipants"
          ).value;
          const totalCostOfIntervention = document.getElementById(
            "Total-cost-of-intervention"
          ).value;
          const effectSize = document.getElementById("EffectSize").value;
          const organisationName =
            document.getElementById("OrganisationName").value;
          const organisationType =
            document.getElementById("OrganisationType").value;
          const email = document.getElementById("Email").value;
          console.log(effectSize);
          const request = `${url}totalParticipant=${numberOfParticipants}&interventionCosts=${totalCostOfIntervention}&populationType=${organisationType}&interventionType=${interventionType}&email=${email}&effectSize=${effectSize}&organisationType=${organisationType}&projectName=${projectName}&organisationName=${organisationName}`;
          fetch(request, {
            method: "GET",
            mode: "no-cors",
          }).then((res) => {
            console.log(res);
          });
        }
      });
    </script>
    <script>
      document.getElementById("goback").addEventListener("click", function (e) {
        window.parent.location.href = "https://ensomhedital.webflow.io/";
      });
    </script>
  </body>
</html>
